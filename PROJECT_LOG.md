# Cartofia Platform – Project Log

Chronological log of design decisions and milestones for the Cartofia Platform.

---

## 2025-11-30 – Initial Concept & Architecture

- Decided to build a **self-hosted platform** using Proxmox, Discord, and web tech.
- Core idea:
  - Use a **Discord bot** to start/stop game instances on Proxmox.
  - Serve games via a **web interface** so friends can play.

### Pygame Game: Cartofia

- Existing project: `Cartofia-game` written in Pygame.
- Decision: instead of streaming a desktop, convert Cartofia to **WebAssembly** using `pygbag` so it can run in the browser.
- Rationale:
  - Low bandwidth (static assets + local execution).
  - Simpler for friends to access (just a URL).

### Containers and IDs

- Chosen numbering convention:
  - **CT1000** – Bot / orchestration container.
  - **CT2000** – Game container (initially Cartofia).
- CT1000 runs Discord bots and automation.
- CT2000 will host the web version of Cartofia.

---

## 2025-11-30 – Network Design

- Existing setup:
  - `vmbr0` – external/LAN access.
  - `vmbr1` – unsafe / vulnerable lab.
- New design:
  - Add **`vmbr2`** for “games & services” network.
    - Example subnet: `10.22.0.1/24`.
- Purpose of `vmbr2`:
  - Isolated network for CTs that serve games and websites.
  - Traffic from the internet always goes through a dedicated gateway CT.

---

## 2025-11-30 – Role Definitions

### CT1000 – Bot / Orchestration

- Runs Discord bot(s).
- Talks to Proxmox API to:
  - Start/stop containers (e.g. CT2000).
- Connected to `vmbr0` for:
  - Discord API access.
  - Proxmox node access.

Planned behaviour:

- `/play_cartofia`:
  - Start CT2000 (if stopped).
  - Send a “loading” message while the container boots.
  - Post the public URL once the game is reachable.

### CT1010 – Gateway

- New container planned as the **only public-facing web entry point**.
- Dual-homed:
  - `vmbr0` for external traffic.
  - `vmbr2` for internal services.
- Will run a reverse proxy:
  - Terminate HTTPS.
  - Route subdomains to internal CTs (e.g., Cartofia, games portal, other apps).

### CT2000 – Cartofia Web Game

- Connected only to `vmbr2`.
- Will host:
  - Static files for the Cartofia WebAssembly build generated by `pygbag`.
- Accessible externally through CT1010 reverse proxy.

---

## 2025-11-30 – Future Platform Direction

- The Cartofia CT (`CT2000`) is planned as the **first game CT**, but the architecture is designed for expansion:
  - CT2100 – a future “games portal” website.
  - Additional CTs (CT22xx) – more WASM games or web tools.
  - Optional CT3000 – shared services (databases, metrics, logging).

- Long-term goal:
  - A small “home arcade” platform:
    - Discord for control and notifications.
    - Proxmox for lifecycle management.
    - Web front-end for playing multiple games and using tools.

---

*This log is updated as new milestones and design decisions are made.*